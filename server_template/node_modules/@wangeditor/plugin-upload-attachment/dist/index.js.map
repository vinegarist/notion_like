{"version":3,"file":"index.js","mappings":"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","sources":["webpack://WangEditorPluginUploadAttachment/webpack/universalModuleDefinition","webpack://WangEditorPluginUploadAttachment/external umd {\"commonjs\":\"@wangeditor/editor\",\"commonjs2\":\"@wangeditor/editor\",\"amd\":\"@wangeditor/editor\",\"root\":\"wangEditor\"}","webpack://WangEditorPluginUploadAttachment/webpack/bootstrap","webpack://WangEditorPluginUploadAttachment/webpack/runtime/define property getters","webpack://WangEditorPluginUploadAttachment/webpack/runtime/hasOwnProperty shorthand","webpack://WangEditorPluginUploadAttachment/webpack/runtime/make namespace object","webpack://WangEditorPluginUploadAttachment/./src/module/local.ts","webpack://WangEditorPluginUploadAttachment/./node_modules/snabbdom/build/vnode.js","webpack://WangEditorPluginUploadAttachment/./node_modules/snabbdom/build/is.js","webpack://WangEditorPluginUploadAttachment/./node_modules/snabbdom/build/h.js","webpack://WangEditorPluginUploadAttachment/./src/module/render-elem.ts","webpack://WangEditorPluginUploadAttachment/./node_modules/ssr-window/ssr-window.esm.js","webpack://WangEditorPluginUploadAttachment/./node_modules/dom7/dom7.esm.js","webpack://WangEditorPluginUploadAttachment/./src/utils/dom.ts","webpack://WangEditorPluginUploadAttachment/./src/module/menu/helper.ts","webpack://WangEditorPluginUploadAttachment/./src/module/menu/UploadAttachment.ts","webpack://WangEditorPluginUploadAttachment/./src/constants/icon-svg.ts","webpack://WangEditorPluginUploadAttachment/./src/module/menu/DownloadAttachment.ts","webpack://WangEditorPluginUploadAttachment/./src/index.ts","webpack://WangEditorPluginUploadAttachment/./src/module/index.ts","webpack://WangEditorPluginUploadAttachment/./src/module/plugin.ts","webpack://WangEditorPluginUploadAttachment/./src/module/elem-to-html.ts","webpack://WangEditorPluginUploadAttachment/./src/module/parse-elem-html.ts","webpack://WangEditorPluginUploadAttachment/./src/module/menu/index.ts","webpack://WangEditorPluginUploadAttachment/./src/module/menu/config.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@wangeditor/editor\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@wangeditor/editor\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WangEditorPluginUploadAttachment\"] = factory(require(\"@wangeditor/editor\"));\n\telse\n\t\troot[\"WangEditorPluginUploadAttachment\"] = factory(root[\"wangEditor\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__857__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__857__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * @description 多语言\n * @author wangfupeng\n */\n\nimport { i18nAddResources } from '@wangeditor/editor'\n\ni18nAddResources('en', {\n  attachment: {\n    upload: 'Upload Attachment',\n    download: 'Download Attachment',\n  },\n})\n\ni18nAddResources('zh-CN', {\n  attachment: {\n    upload: '上传附件',\n    download: '下载附件',\n  },\n})\n","export function vnode(sel, data, children, text, elm) {\n    const key = data === undefined ? undefined : data.key;\n    return { sel, data, children, text, elm, key };\n}\n//# sourceMappingURL=vnode.js.map","export const array = Array.isArray;\nexport function primitive(s) {\n    return (typeof s === \"string\" ||\n        typeof s === \"number\" ||\n        s instanceof String ||\n        s instanceof Number);\n}\n//# sourceMappingURL=is.js.map","import { vnode } from \"./vnode\";\nimport * as is from \"./is\";\nexport function addNS(data, children, sel) {\n    data.ns = \"http://www.w3.org/2000/svg\";\n    if (sel !== \"foreignObject\" && children !== undefined) {\n        for (let i = 0; i < children.length; ++i) {\n            const child = children[i];\n            if (typeof child === \"string\")\n                continue;\n            const childData = child.data;\n            if (childData !== undefined) {\n                addNS(childData, child.children, child.sel);\n            }\n        }\n    }\n}\nexport function h(sel, b, c) {\n    let data = {};\n    let children;\n    let text;\n    let i;\n    if (c !== undefined) {\n        if (b !== null) {\n            data = b;\n        }\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c.toString();\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined && b !== null) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b.toString();\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (children !== undefined) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode(undefined, undefined, undefined, children[i], undefined);\n        }\n    }\n    if (sel[0] === \"s\" &&\n        sel[1] === \"v\" &&\n        sel[2] === \"g\" &&\n        (sel.length === 3 || sel[3] === \".\" || sel[3] === \"#\")) {\n        addNS(data, children, sel);\n    }\n    return vnode(sel, data, children, text, undefined);\n}\n/**\n * @experimental\n */\nexport function fragment(children) {\n    let c;\n    let text;\n    if (is.array(children)) {\n        c = children;\n    }\n    else if (is.primitive(c)) {\n        text = children;\n    }\n    else if (c && c.sel) {\n        c = [children];\n    }\n    if (c !== undefined) {\n        for (let i = 0; i < c.length; ++i) {\n            if (is.primitive(c[i]))\n                c[i] = vnode(undefined, undefined, undefined, c[i], undefined);\n        }\n    }\n    return vnode(undefined, {}, c, text, undefined);\n}\n//# sourceMappingURL=h.js.map","/**\n * @description render elem\n * @author wangfupeng\n */\n\nimport { h, VNode } from 'snabbdom'\nimport { DomEditor, IDomEditor, SlateElement } from '@wangeditor/editor'\nimport { AttachmentElement } from './custom-types'\n\nfunction renderAttachment(elem: SlateElement, children: VNode[] | null, editor: IDomEditor): VNode {\n  const isDisabled = editor.isDisabled()\n\n  // 当前节点是否选中\n  const selected = DomEditor.isNodeSelected(editor, elem)\n\n  // 构建 vnode\n  const { fileName = '', link = '' } = elem as AttachmentElement\n  const vnode = h(\n    'span',\n    {\n      props: {\n        contentEditable: false, // 不可编辑\n      },\n      style: {\n        display: 'inline-block', // inline\n        marginLeft: '3px',\n        marginRight: '3px',\n        border:\n          selected && !isDisabled\n            ? '2px solid var(--w-e-textarea-selected-border-color)' // wangEditor 提供了 css var https://www.wangeditor.com/v5/theme.html\n            : '2px solid transparent',\n        borderRadius: '3px',\n        padding: '0 3px',\n        backgroundColor: '#f1f1f1',\n        cursor: isDisabled ? 'pointer' : 'inherit',\n      },\n      on: {\n        // disable 时，点击下载附件\n        click() {\n          if (!isDisabled) return\n          if (link) {\n            window.open(link, '_blank')\n          }\n        },\n      },\n    },\n    [\n      h('img', {\n        props: {\n          src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAv5JREFUWEetl1nITVEUx3/fo5LkyRQeFA+SIS8eZHhQimRKMhMSoogyR5QxMs9DkplQEhFvxihCKUWkpCTP9P9a+1p3f2efe869367T3Xeftdf/v9e012mi9cZQYDzQBxgIfANeAO+BDSmYplbCX58HAnwFFgNXY7zWIHABmBQpfg10A9pH64OAZ36tUQLngClO4XVgC/DU1iYCF937N+aiylIjBM4A05xy+XljwqV/3bpkKjFRL4GTwMyU0gwSY4Abtn4NGBdk6iFwFJhbAjyI/gLaAR+BnvUSOATML2j22BCvgL7AbyPS/L6MBfYDC3NOrlS8BLzNcIGi/4mtPwSGlbXAHmBJDriCSgQU5UrJmIT8Ptb277OaUNgCu4BlBcCDSFWUGzFfCXV6WaEQge3A8hLgcSquBjbnBWxeDGwFVtXwuT9ZfHLtlY4wFB9xxUwGoViLfVGzxuCymqyXC57KAilb1wC44kVxUxM8i8Bs4HgJn8cnV6YoYwqBxwR6A/eBzrY7Vh5SLeUW1QjVisLgMQEFyQTbfQqY5ZTVAp8HHC4L7gnocrhiCj5ZpdKvxlJgd45b5gDHcsDzKmQlC3zUrwS2mcJ+wAPXWMRumQHIWimzh04pVSErBG4Do0zLaOCWzX2rpeZjqgPT/GwB8FTMNK+HQqSerZNJKgjVUGro9Go2NXwJnQycLwGebFYCgS9AF1PYEfhu8wXAQZurfh8AutcoMnGDGrvN8f5vAQVg6FJGAndNqq211SE1qzbb9evLaylw74I1wCbTvgLY4ZAGAzeBDhH6kYzmRARyfR6fILhAd7XubI0fQC/gpxNuY23YcOCDdbrP3fvSJw97/W14B5D5NR4DQ2K2if91g3sXaN4V+OxAlN+LgD8J4B7WbJTpjluoivuB6cBpJ6VquBd4BAST67tP1tHFIxKlfJ6KAb8+AriXcWqlarCUf60ashY4UdBlVWKpjkgRvzP6+MjSf9nA39UDHsdAlg7VhgFAf3sk89IefXq3+NotS+QfmNG0IS7jBhcAAAAASUVORK5CYII=',\n        },\n        style: {\n          width: '1em',\n          marginRight: '0.1em',\n          minWidth: '0',\n          minHeight: '0',\n        },\n      }),\n      fileName,\n    ]\n  )\n\n  return vnode\n}\n\nconst conf = {\n  type: 'attachment', // 节点 type ，重要！！！\n  renderElem: renderAttachment,\n}\n\nexport default conf\n","/**\n * SSR Window 4.0.2\n * Better handling for window object in SSR environment\n * https://github.com/nolimits4web/ssr-window\n *\n * Copyright 2021, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: December 13, 2021\n */\n/* eslint-disable no-param-reassign */\nfunction isObject(obj) {\n    return (obj !== null &&\n        typeof obj === 'object' &&\n        'constructor' in obj &&\n        obj.constructor === Object);\n}\nfunction extend(target = {}, src = {}) {\n    Object.keys(src).forEach((key) => {\n        if (typeof target[key] === 'undefined')\n            target[key] = src[key];\n        else if (isObject(src[key]) &&\n            isObject(target[key]) &&\n            Object.keys(src[key]).length > 0) {\n            extend(target[key], src[key]);\n        }\n    });\n}\n\nconst ssrDocument = {\n    body: {},\n    addEventListener() { },\n    removeEventListener() { },\n    activeElement: {\n        blur() { },\n        nodeName: '',\n    },\n    querySelector() {\n        return null;\n    },\n    querySelectorAll() {\n        return [];\n    },\n    getElementById() {\n        return null;\n    },\n    createEvent() {\n        return {\n            initEvent() { },\n        };\n    },\n    createElement() {\n        return {\n            children: [],\n            childNodes: [],\n            style: {},\n            setAttribute() { },\n            getElementsByTagName() {\n                return [];\n            },\n        };\n    },\n    createElementNS() {\n        return {};\n    },\n    importNode() {\n        return null;\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n};\nfunction getDocument() {\n    const doc = typeof document !== 'undefined' ? document : {};\n    extend(doc, ssrDocument);\n    return doc;\n}\n\nconst ssrWindow = {\n    document: ssrDocument,\n    navigator: {\n        userAgent: '',\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n    history: {\n        replaceState() { },\n        pushState() { },\n        go() { },\n        back() { },\n    },\n    CustomEvent: function CustomEvent() {\n        return this;\n    },\n    addEventListener() { },\n    removeEventListener() { },\n    getComputedStyle() {\n        return {\n            getPropertyValue() {\n                return '';\n            },\n        };\n    },\n    Image() { },\n    Date() { },\n    screen: {},\n    setTimeout() { },\n    clearTimeout() { },\n    matchMedia() {\n        return {};\n    },\n    requestAnimationFrame(callback) {\n        if (typeof setTimeout === 'undefined') {\n            callback();\n            return null;\n        }\n        return setTimeout(callback, 0);\n    },\n    cancelAnimationFrame(id) {\n        if (typeof setTimeout === 'undefined') {\n            return;\n        }\n        clearTimeout(id);\n    },\n};\nfunction getWindow() {\n    const win = typeof window !== 'undefined' ? window : {};\n    extend(win, ssrWindow);\n    return win;\n}\n\nexport { extend, getDocument, getWindow, ssrDocument, ssrWindow };\n","/**\n * Dom7 4.0.4\n * Minimalistic JavaScript library for DOM manipulation, with a jQuery-compatible API\n * https://framework7.io/docs/dom7.html\n *\n * Copyright 2022, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: January 11, 2022\n */\nimport { getWindow, getDocument } from 'ssr-window';\n\n/* eslint-disable no-proto */\nfunction makeReactive(obj) {\n  const proto = obj.__proto__;\n  Object.defineProperty(obj, '__proto__', {\n    get() {\n      return proto;\n    },\n\n    set(value) {\n      proto.__proto__ = value;\n    }\n\n  });\n}\n\nclass Dom7 extends Array {\n  constructor(items) {\n    if (typeof items === 'number') {\n      super(items);\n    } else {\n      super(...(items || []));\n      makeReactive(this);\n    }\n  }\n\n}\n\nfunction arrayFlat(arr = []) {\n  const res = [];\n  arr.forEach(el => {\n    if (Array.isArray(el)) {\n      res.push(...arrayFlat(el));\n    } else {\n      res.push(el);\n    }\n  });\n  return res;\n}\nfunction arrayFilter(arr, callback) {\n  return Array.prototype.filter.call(arr, callback);\n}\nfunction arrayUnique(arr) {\n  const uniqueArray = [];\n\n  for (let i = 0; i < arr.length; i += 1) {\n    if (uniqueArray.indexOf(arr[i]) === -1) uniqueArray.push(arr[i]);\n  }\n\n  return uniqueArray;\n}\nfunction toCamelCase(string) {\n  return string.toLowerCase().replace(/-(.)/g, (match, group) => group.toUpperCase());\n}\n\n// eslint-disable-next-line\n\nfunction qsa(selector, context) {\n  if (typeof selector !== 'string') {\n    return [selector];\n  }\n\n  const a = [];\n  const res = context.querySelectorAll(selector);\n\n  for (let i = 0; i < res.length; i += 1) {\n    a.push(res[i]);\n  }\n\n  return a;\n}\n\nfunction $(selector, context) {\n  const window = getWindow();\n  const document = getDocument();\n  let arr = [];\n\n  if (!context && selector instanceof Dom7) {\n    return selector;\n  }\n\n  if (!selector) {\n    return new Dom7(arr);\n  }\n\n  if (typeof selector === 'string') {\n    const html = selector.trim();\n\n    if (html.indexOf('<') >= 0 && html.indexOf('>') >= 0) {\n      let toCreate = 'div';\n      if (html.indexOf('<li') === 0) toCreate = 'ul';\n      if (html.indexOf('<tr') === 0) toCreate = 'tbody';\n      if (html.indexOf('<td') === 0 || html.indexOf('<th') === 0) toCreate = 'tr';\n      if (html.indexOf('<tbody') === 0) toCreate = 'table';\n      if (html.indexOf('<option') === 0) toCreate = 'select';\n      const tempParent = document.createElement(toCreate);\n      tempParent.innerHTML = html;\n\n      for (let i = 0; i < tempParent.childNodes.length; i += 1) {\n        arr.push(tempParent.childNodes[i]);\n      }\n    } else {\n      arr = qsa(selector.trim(), context || document);\n    } // arr = qsa(selector, document);\n\n  } else if (selector.nodeType || selector === window || selector === document) {\n    arr.push(selector);\n  } else if (Array.isArray(selector)) {\n    if (selector instanceof Dom7) return selector;\n    arr = selector;\n  }\n\n  return new Dom7(arrayUnique(arr));\n}\n\n$.fn = Dom7.prototype;\n\n// eslint-disable-next-line\n\nfunction addClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    el.classList.add(...classNames);\n  });\n  return this;\n}\n\nfunction removeClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    el.classList.remove(...classNames);\n  });\n  return this;\n}\n\nfunction toggleClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    classNames.forEach(className => {\n      el.classList.toggle(className);\n    });\n  });\n}\n\nfunction hasClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  return arrayFilter(this, el => {\n    return classNames.filter(className => el.classList.contains(className)).length > 0;\n  }).length > 0;\n}\n\nfunction attr(attrs, value) {\n  if (arguments.length === 1 && typeof attrs === 'string') {\n    // Get attr\n    if (this[0]) return this[0].getAttribute(attrs);\n    return undefined;\n  } // Set attrs\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (arguments.length === 2) {\n      // String\n      this[i].setAttribute(attrs, value);\n    } else {\n      // Object\n      for (const attrName in attrs) {\n        this[i][attrName] = attrs[attrName];\n        this[i].setAttribute(attrName, attrs[attrName]);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction removeAttr(attr) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].removeAttribute(attr);\n  }\n\n  return this;\n}\n\nfunction prop(props, value) {\n  if (arguments.length === 1 && typeof props === 'string') {\n    // Get prop\n    if (this[0]) return this[0][props];\n  } else {\n    // Set props\n    for (let i = 0; i < this.length; i += 1) {\n      if (arguments.length === 2) {\n        // String\n        this[i][props] = value;\n      } else {\n        // Object\n        for (const propName in props) {\n          this[i][propName] = props[propName];\n        }\n      }\n    }\n\n    return this;\n  }\n\n  return this;\n}\n\nfunction data(key, value) {\n  let el;\n\n  if (typeof value === 'undefined') {\n    el = this[0];\n    if (!el) return undefined; // Get value\n\n    if (el.dom7ElementDataStorage && key in el.dom7ElementDataStorage) {\n      return el.dom7ElementDataStorage[key];\n    }\n\n    const dataKey = el.getAttribute(`data-${key}`);\n\n    if (dataKey) {\n      return dataKey;\n    }\n\n    return undefined;\n  } // Set value\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    el = this[i];\n    if (!el.dom7ElementDataStorage) el.dom7ElementDataStorage = {};\n    el.dom7ElementDataStorage[key] = value;\n  }\n\n  return this;\n}\n\nfunction removeData(key) {\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.dom7ElementDataStorage && el.dom7ElementDataStorage[key]) {\n      el.dom7ElementDataStorage[key] = null;\n      delete el.dom7ElementDataStorage[key];\n    }\n  }\n}\n\nfunction dataset() {\n  const el = this[0];\n  if (!el) return undefined;\n  const dataset = {}; // eslint-disable-line\n\n  if (el.dataset) {\n    for (const dataKey in el.dataset) {\n      dataset[dataKey] = el.dataset[dataKey];\n    }\n  } else {\n    for (let i = 0; i < el.attributes.length; i += 1) {\n      const attr = el.attributes[i];\n\n      if (attr.name.indexOf('data-') >= 0) {\n        dataset[toCamelCase(attr.name.split('data-')[1])] = attr.value;\n      }\n    }\n  }\n\n  for (const key in dataset) {\n    if (dataset[key] === 'false') dataset[key] = false;else if (dataset[key] === 'true') dataset[key] = true;else if (parseFloat(dataset[key]) === dataset[key] * 1) dataset[key] *= 1;\n  }\n\n  return dataset;\n}\n\nfunction val(value) {\n  if (typeof value === 'undefined') {\n    // get value\n    const el = this[0];\n    if (!el) return undefined;\n\n    if (el.multiple && el.nodeName.toLowerCase() === 'select') {\n      const values = [];\n\n      for (let i = 0; i < el.selectedOptions.length; i += 1) {\n        values.push(el.selectedOptions[i].value);\n      }\n\n      return values;\n    }\n\n    return el.value;\n  } // set value\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (Array.isArray(value) && el.multiple && el.nodeName.toLowerCase() === 'select') {\n      for (let j = 0; j < el.options.length; j += 1) {\n        el.options[j].selected = value.indexOf(el.options[j].value) >= 0;\n      }\n    } else {\n      el.value = value;\n    }\n  }\n\n  return this;\n}\n\nfunction value(value) {\n  return this.val(value);\n}\n\nfunction transform(transform) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.transform = transform;\n  }\n\n  return this;\n}\n\nfunction transition(duration) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.transitionDuration = typeof duration !== 'string' ? `${duration}ms` : duration;\n  }\n\n  return this;\n}\n\nfunction on(...args) {\n  let [eventType, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventType, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  if (!capture) capture = false;\n\n  function handleLiveEvent(e) {\n    const target = e.target;\n    if (!target) return;\n    const eventData = e.target.dom7EventData || [];\n\n    if (eventData.indexOf(e) < 0) {\n      eventData.unshift(e);\n    }\n\n    if ($(target).is(targetSelector)) listener.apply(target, eventData);else {\n      const parents = $(target).parents(); // eslint-disable-line\n\n      for (let k = 0; k < parents.length; k += 1) {\n        if ($(parents[k]).is(targetSelector)) listener.apply(parents[k], eventData);\n      }\n    }\n  }\n\n  function handleEvent(e) {\n    const eventData = e && e.target ? e.target.dom7EventData || [] : [];\n\n    if (eventData.indexOf(e) < 0) {\n      eventData.unshift(e);\n    }\n\n    listener.apply(this, eventData);\n  }\n\n  const events = eventType.split(' ');\n  let j;\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (!targetSelector) {\n      for (j = 0; j < events.length; j += 1) {\n        const event = events[j];\n        if (!el.dom7Listeners) el.dom7Listeners = {};\n        if (!el.dom7Listeners[event]) el.dom7Listeners[event] = [];\n        el.dom7Listeners[event].push({\n          listener,\n          proxyListener: handleEvent\n        });\n        el.addEventListener(event, handleEvent, capture);\n      }\n    } else {\n      // Live events\n      for (j = 0; j < events.length; j += 1) {\n        const event = events[j];\n        if (!el.dom7LiveListeners) el.dom7LiveListeners = {};\n        if (!el.dom7LiveListeners[event]) el.dom7LiveListeners[event] = [];\n        el.dom7LiveListeners[event].push({\n          listener,\n          proxyListener: handleLiveEvent\n        });\n        el.addEventListener(event, handleLiveEvent, capture);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction off(...args) {\n  let [eventType, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventType, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  if (!capture) capture = false;\n  const events = eventType.split(' ');\n\n  for (let i = 0; i < events.length; i += 1) {\n    const event = events[i];\n\n    for (let j = 0; j < this.length; j += 1) {\n      const el = this[j];\n      let handlers;\n\n      if (!targetSelector && el.dom7Listeners) {\n        handlers = el.dom7Listeners[event];\n      } else if (targetSelector && el.dom7LiveListeners) {\n        handlers = el.dom7LiveListeners[event];\n      }\n\n      if (handlers && handlers.length) {\n        for (let k = handlers.length - 1; k >= 0; k -= 1) {\n          const handler = handlers[k];\n\n          if (listener && handler.listener === listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          } else if (listener && handler.listener && handler.listener.dom7proxy && handler.listener.dom7proxy === listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          } else if (!listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          }\n        }\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction once(...args) {\n  const dom = this;\n  let [eventName, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventName, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  function onceHandler(...eventArgs) {\n    listener.apply(this, eventArgs);\n    dom.off(eventName, targetSelector, onceHandler, capture);\n\n    if (onceHandler.dom7proxy) {\n      delete onceHandler.dom7proxy;\n    }\n  }\n\n  onceHandler.dom7proxy = listener;\n  return dom.on(eventName, targetSelector, onceHandler, capture);\n}\n\nfunction trigger(...args) {\n  const window = getWindow();\n  const events = args[0].split(' ');\n  const eventData = args[1];\n\n  for (let i = 0; i < events.length; i += 1) {\n    const event = events[i];\n\n    for (let j = 0; j < this.length; j += 1) {\n      const el = this[j];\n\n      if (window.CustomEvent) {\n        const evt = new window.CustomEvent(event, {\n          detail: eventData,\n          bubbles: true,\n          cancelable: true\n        });\n        el.dom7EventData = args.filter((data, dataIndex) => dataIndex > 0);\n        el.dispatchEvent(evt);\n        el.dom7EventData = [];\n        delete el.dom7EventData;\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction transitionEnd(callback) {\n  const dom = this;\n\n  function fireCallBack(e) {\n    if (e.target !== this) return;\n    callback.call(this, e);\n    dom.off('transitionend', fireCallBack);\n  }\n\n  if (callback) {\n    dom.on('transitionend', fireCallBack);\n  }\n\n  return this;\n}\n\nfunction animationEnd(callback) {\n  const dom = this;\n\n  function fireCallBack(e) {\n    if (e.target !== this) return;\n    callback.call(this, e);\n    dom.off('animationend', fireCallBack);\n  }\n\n  if (callback) {\n    dom.on('animationend', fireCallBack);\n  }\n\n  return this;\n}\n\nfunction width() {\n  const window = getWindow();\n\n  if (this[0] === window) {\n    return window.innerWidth;\n  }\n\n  if (this.length > 0) {\n    return parseFloat(this.css('width'));\n  }\n\n  return null;\n}\n\nfunction outerWidth(includeMargins) {\n  if (this.length > 0) {\n    if (includeMargins) {\n      const styles = this.styles();\n      return this[0].offsetWidth + parseFloat(styles.getPropertyValue('margin-right')) + parseFloat(styles.getPropertyValue('margin-left'));\n    }\n\n    return this[0].offsetWidth;\n  }\n\n  return null;\n}\n\nfunction height() {\n  const window = getWindow();\n\n  if (this[0] === window) {\n    return window.innerHeight;\n  }\n\n  if (this.length > 0) {\n    return parseFloat(this.css('height'));\n  }\n\n  return null;\n}\n\nfunction outerHeight(includeMargins) {\n  if (this.length > 0) {\n    if (includeMargins) {\n      const styles = this.styles();\n      return this[0].offsetHeight + parseFloat(styles.getPropertyValue('margin-top')) + parseFloat(styles.getPropertyValue('margin-bottom'));\n    }\n\n    return this[0].offsetHeight;\n  }\n\n  return null;\n}\n\nfunction offset() {\n  if (this.length > 0) {\n    const window = getWindow();\n    const document = getDocument();\n    const el = this[0];\n    const box = el.getBoundingClientRect();\n    const body = document.body;\n    const clientTop = el.clientTop || body.clientTop || 0;\n    const clientLeft = el.clientLeft || body.clientLeft || 0;\n    const scrollTop = el === window ? window.scrollY : el.scrollTop;\n    const scrollLeft = el === window ? window.scrollX : el.scrollLeft;\n    return {\n      top: box.top + scrollTop - clientTop,\n      left: box.left + scrollLeft - clientLeft\n    };\n  }\n\n  return null;\n}\n\nfunction hide() {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.display = 'none';\n  }\n\n  return this;\n}\n\nfunction show() {\n  const window = getWindow();\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.style.display === 'none') {\n      el.style.display = '';\n    }\n\n    if (window.getComputedStyle(el, null).getPropertyValue('display') === 'none') {\n      // Still not visible\n      el.style.display = 'block';\n    }\n  }\n\n  return this;\n}\n\nfunction styles() {\n  const window = getWindow();\n  if (this[0]) return window.getComputedStyle(this[0], null);\n  return {};\n}\n\nfunction css(props, value) {\n  const window = getWindow();\n  let i;\n\n  if (arguments.length === 1) {\n    if (typeof props === 'string') {\n      // .css('width')\n      if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(props);\n    } else {\n      // .css({ width: '100px' })\n      for (i = 0; i < this.length; i += 1) {\n        for (const prop in props) {\n          this[i].style[prop] = props[prop];\n        }\n      }\n\n      return this;\n    }\n  }\n\n  if (arguments.length === 2 && typeof props === 'string') {\n    // .css('width', '100px')\n    for (i = 0; i < this.length; i += 1) {\n      this[i].style[props] = value;\n    }\n\n    return this;\n  }\n\n  return this;\n}\n\nfunction each(callback) {\n  if (!callback) return this;\n  this.forEach((el, index) => {\n    callback.apply(el, [el, index]);\n  });\n  return this;\n}\n\nfunction filter(callback) {\n  const result = arrayFilter(this, callback);\n  return $(result);\n}\n\nfunction html(html) {\n  if (typeof html === 'undefined') {\n    return this[0] ? this[0].innerHTML : null;\n  }\n\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].innerHTML = html;\n  }\n\n  return this;\n}\n\nfunction text(text) {\n  if (typeof text === 'undefined') {\n    return this[0] ? this[0].textContent.trim() : null;\n  }\n\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].textContent = text;\n  }\n\n  return this;\n}\n\nfunction is(selector) {\n  const window = getWindow();\n  const document = getDocument();\n  const el = this[0];\n  let compareWith;\n  let i;\n  if (!el || typeof selector === 'undefined') return false;\n\n  if (typeof selector === 'string') {\n    if (el.matches) return el.matches(selector);\n    if (el.webkitMatchesSelector) return el.webkitMatchesSelector(selector);\n    if (el.msMatchesSelector) return el.msMatchesSelector(selector);\n    compareWith = $(selector);\n\n    for (i = 0; i < compareWith.length; i += 1) {\n      if (compareWith[i] === el) return true;\n    }\n\n    return false;\n  }\n\n  if (selector === document) {\n    return el === document;\n  }\n\n  if (selector === window) {\n    return el === window;\n  }\n\n  if (selector.nodeType || selector instanceof Dom7) {\n    compareWith = selector.nodeType ? [selector] : selector;\n\n    for (i = 0; i < compareWith.length; i += 1) {\n      if (compareWith[i] === el) return true;\n    }\n\n    return false;\n  }\n\n  return false;\n}\n\nfunction index() {\n  let child = this[0];\n  let i;\n\n  if (child) {\n    i = 0; // eslint-disable-next-line\n\n    while ((child = child.previousSibling) !== null) {\n      if (child.nodeType === 1) i += 1;\n    }\n\n    return i;\n  }\n\n  return undefined;\n}\n\nfunction eq(index) {\n  if (typeof index === 'undefined') return this;\n  const length = this.length;\n\n  if (index > length - 1) {\n    return $([]);\n  }\n\n  if (index < 0) {\n    const returnIndex = length + index;\n    if (returnIndex < 0) return $([]);\n    return $([this[returnIndex]]);\n  }\n\n  return $([this[index]]);\n}\n\nfunction append(...els) {\n  let newChild;\n  const document = getDocument();\n\n  for (let k = 0; k < els.length; k += 1) {\n    newChild = els[k];\n\n    for (let i = 0; i < this.length; i += 1) {\n      if (typeof newChild === 'string') {\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = newChild;\n\n        while (tempDiv.firstChild) {\n          this[i].appendChild(tempDiv.firstChild);\n        }\n      } else if (newChild instanceof Dom7) {\n        for (let j = 0; j < newChild.length; j += 1) {\n          this[i].appendChild(newChild[j]);\n        }\n      } else {\n        this[i].appendChild(newChild);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction appendTo(parent) {\n  $(parent).append(this);\n  return this;\n}\n\nfunction prepend(newChild) {\n  const document = getDocument();\n  let i;\n  let j;\n\n  for (i = 0; i < this.length; i += 1) {\n    if (typeof newChild === 'string') {\n      const tempDiv = document.createElement('div');\n      tempDiv.innerHTML = newChild;\n\n      for (j = tempDiv.childNodes.length - 1; j >= 0; j -= 1) {\n        this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0]);\n      }\n    } else if (newChild instanceof Dom7) {\n      for (j = 0; j < newChild.length; j += 1) {\n        this[i].insertBefore(newChild[j], this[i].childNodes[0]);\n      }\n    } else {\n      this[i].insertBefore(newChild, this[i].childNodes[0]);\n    }\n  }\n\n  return this;\n}\n\nfunction prependTo(parent) {\n  $(parent).prepend(this);\n  return this;\n}\n\nfunction insertBefore(selector) {\n  const before = $(selector);\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (before.length === 1) {\n      before[0].parentNode.insertBefore(this[i], before[0]);\n    } else if (before.length > 1) {\n      for (let j = 0; j < before.length; j += 1) {\n        before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j]);\n      }\n    }\n  }\n}\n\nfunction insertAfter(selector) {\n  const after = $(selector);\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (after.length === 1) {\n      after[0].parentNode.insertBefore(this[i], after[0].nextSibling);\n    } else if (after.length > 1) {\n      for (let j = 0; j < after.length; j += 1) {\n        after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling);\n      }\n    }\n  }\n}\n\nfunction next(selector) {\n  if (this.length > 0) {\n    if (selector) {\n      if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) {\n        return $([this[0].nextElementSibling]);\n      }\n\n      return $([]);\n    }\n\n    if (this[0].nextElementSibling) return $([this[0].nextElementSibling]);\n    return $([]);\n  }\n\n  return $([]);\n}\n\nfunction nextAll(selector) {\n  const nextEls = [];\n  let el = this[0];\n  if (!el) return $([]);\n\n  while (el.nextElementSibling) {\n    const next = el.nextElementSibling; // eslint-disable-line\n\n    if (selector) {\n      if ($(next).is(selector)) nextEls.push(next);\n    } else nextEls.push(next);\n\n    el = next;\n  }\n\n  return $(nextEls);\n}\n\nfunction prev(selector) {\n  if (this.length > 0) {\n    const el = this[0];\n\n    if (selector) {\n      if (el.previousElementSibling && $(el.previousElementSibling).is(selector)) {\n        return $([el.previousElementSibling]);\n      }\n\n      return $([]);\n    }\n\n    if (el.previousElementSibling) return $([el.previousElementSibling]);\n    return $([]);\n  }\n\n  return $([]);\n}\n\nfunction prevAll(selector) {\n  const prevEls = [];\n  let el = this[0];\n  if (!el) return $([]);\n\n  while (el.previousElementSibling) {\n    const prev = el.previousElementSibling; // eslint-disable-line\n\n    if (selector) {\n      if ($(prev).is(selector)) prevEls.push(prev);\n    } else prevEls.push(prev);\n\n    el = prev;\n  }\n\n  return $(prevEls);\n}\n\nfunction siblings(selector) {\n  return this.nextAll(selector).add(this.prevAll(selector));\n}\n\nfunction parent(selector) {\n  const parents = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (this[i].parentNode !== null) {\n      if (selector) {\n        if ($(this[i].parentNode).is(selector)) parents.push(this[i].parentNode);\n      } else {\n        parents.push(this[i].parentNode);\n      }\n    }\n  }\n\n  return $(parents);\n}\n\nfunction parents(selector) {\n  const parents = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    let parent = this[i].parentNode; // eslint-disable-line\n\n    while (parent) {\n      if (selector) {\n        if ($(parent).is(selector)) parents.push(parent);\n      } else {\n        parents.push(parent);\n      }\n\n      parent = parent.parentNode;\n    }\n  }\n\n  return $(parents);\n}\n\nfunction closest(selector) {\n  let closest = this; // eslint-disable-line\n\n  if (typeof selector === 'undefined') {\n    return $([]);\n  }\n\n  if (!closest.is(selector)) {\n    closest = closest.parents(selector).eq(0);\n  }\n\n  return closest;\n}\n\nfunction find(selector) {\n  const foundElements = [];\n\n  for (let i = 0; i < this.length; i += 1) {\n    const found = this[i].querySelectorAll(selector);\n\n    for (let j = 0; j < found.length; j += 1) {\n      foundElements.push(found[j]);\n    }\n  }\n\n  return $(foundElements);\n}\n\nfunction children(selector) {\n  const children = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    const childNodes = this[i].children;\n\n    for (let j = 0; j < childNodes.length; j += 1) {\n      if (!selector || $(childNodes[j]).is(selector)) {\n        children.push(childNodes[j]);\n      }\n    }\n  }\n\n  return $(children);\n}\n\nfunction remove() {\n  for (let i = 0; i < this.length; i += 1) {\n    if (this[i].parentNode) this[i].parentNode.removeChild(this[i]);\n  }\n\n  return this;\n}\n\nfunction detach() {\n  return this.remove();\n}\n\nfunction add(...els) {\n  const dom = this;\n  let i;\n  let j;\n\n  for (i = 0; i < els.length; i += 1) {\n    const toAdd = $(els[i]);\n\n    for (j = 0; j < toAdd.length; j += 1) {\n      dom.push(toAdd[j]);\n    }\n  }\n\n  return dom;\n}\n\nfunction empty() {\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.nodeType === 1) {\n      for (let j = 0; j < el.childNodes.length; j += 1) {\n        if (el.childNodes[j].parentNode) {\n          el.childNodes[j].parentNode.removeChild(el.childNodes[j]);\n        }\n      }\n\n      el.textContent = '';\n    }\n  }\n\n  return this;\n}\n\n// eslint-disable-next-line\n\nfunction scrollTo(...args) {\n  const window = getWindow();\n  let [left, top, duration, easing, callback] = args;\n\n  if (args.length === 4 && typeof easing === 'function') {\n    callback = easing;\n    [left, top, duration, callback, easing] = args;\n  }\n\n  if (typeof easing === 'undefined') easing = 'swing';\n  return this.each(function animate() {\n    const el = this;\n    let currentTop;\n    let currentLeft;\n    let maxTop;\n    let maxLeft;\n    let newTop;\n    let newLeft;\n    let scrollTop; // eslint-disable-line\n\n    let scrollLeft; // eslint-disable-line\n\n    let animateTop = top > 0 || top === 0;\n    let animateLeft = left > 0 || left === 0;\n\n    if (typeof easing === 'undefined') {\n      easing = 'swing';\n    }\n\n    if (animateTop) {\n      currentTop = el.scrollTop;\n\n      if (!duration) {\n        el.scrollTop = top;\n      }\n    }\n\n    if (animateLeft) {\n      currentLeft = el.scrollLeft;\n\n      if (!duration) {\n        el.scrollLeft = left;\n      }\n    }\n\n    if (!duration) return;\n\n    if (animateTop) {\n      maxTop = el.scrollHeight - el.offsetHeight;\n      newTop = Math.max(Math.min(top, maxTop), 0);\n    }\n\n    if (animateLeft) {\n      maxLeft = el.scrollWidth - el.offsetWidth;\n      newLeft = Math.max(Math.min(left, maxLeft), 0);\n    }\n\n    let startTime = null;\n    if (animateTop && newTop === currentTop) animateTop = false;\n    if (animateLeft && newLeft === currentLeft) animateLeft = false;\n\n    function render(time = new Date().getTime()) {\n      if (startTime === null) {\n        startTime = time;\n      }\n\n      const progress = Math.max(Math.min((time - startTime) / duration, 1), 0);\n      const easeProgress = easing === 'linear' ? progress : 0.5 - Math.cos(progress * Math.PI) / 2;\n      let done;\n      if (animateTop) scrollTop = currentTop + easeProgress * (newTop - currentTop);\n      if (animateLeft) scrollLeft = currentLeft + easeProgress * (newLeft - currentLeft);\n\n      if (animateTop && newTop > currentTop && scrollTop >= newTop) {\n        el.scrollTop = newTop;\n        done = true;\n      }\n\n      if (animateTop && newTop < currentTop && scrollTop <= newTop) {\n        el.scrollTop = newTop;\n        done = true;\n      }\n\n      if (animateLeft && newLeft > currentLeft && scrollLeft >= newLeft) {\n        el.scrollLeft = newLeft;\n        done = true;\n      }\n\n      if (animateLeft && newLeft < currentLeft && scrollLeft <= newLeft) {\n        el.scrollLeft = newLeft;\n        done = true;\n      }\n\n      if (done) {\n        if (callback) callback();\n        return;\n      }\n\n      if (animateTop) el.scrollTop = scrollTop;\n      if (animateLeft) el.scrollLeft = scrollLeft;\n      window.requestAnimationFrame(render);\n    }\n\n    window.requestAnimationFrame(render);\n  });\n} // scrollTop(top, duration, easing, callback) {\n\n\nfunction scrollTop(...args) {\n  let [top, duration, easing, callback] = args;\n\n  if (args.length === 3 && typeof easing === 'function') {\n    [top, duration, callback, easing] = args;\n  }\n\n  const dom = this;\n\n  if (typeof top === 'undefined') {\n    if (dom.length > 0) return dom[0].scrollTop;\n    return null;\n  }\n\n  return dom.scrollTo(undefined, top, duration, easing, callback);\n}\n\nfunction scrollLeft(...args) {\n  let [left, duration, easing, callback] = args;\n\n  if (args.length === 3 && typeof easing === 'function') {\n    [left, duration, callback, easing] = args;\n  }\n\n  const dom = this;\n\n  if (typeof left === 'undefined') {\n    if (dom.length > 0) return dom[0].scrollLeft;\n    return null;\n  }\n\n  return dom.scrollTo(left, undefined, duration, easing, callback);\n}\n\n// eslint-disable-next-line\n\nfunction animate(initialProps, initialParams) {\n  const window = getWindow();\n  const els = this;\n  const a = {\n    props: Object.assign({}, initialProps),\n    params: Object.assign({\n      duration: 300,\n      easing: 'swing' // or 'linear'\n\n      /* Callbacks\n      begin(elements)\n      complete(elements)\n      progress(elements, complete, remaining, start, tweenValue)\n      */\n\n    }, initialParams),\n    elements: els,\n    animating: false,\n    que: [],\n\n    easingProgress(easing, progress) {\n      if (easing === 'swing') {\n        return 0.5 - Math.cos(progress * Math.PI) / 2;\n      }\n\n      if (typeof easing === 'function') {\n        return easing(progress);\n      }\n\n      return progress;\n    },\n\n    stop() {\n      if (a.frameId) {\n        window.cancelAnimationFrame(a.frameId);\n      }\n\n      a.animating = false;\n      a.elements.each(el => {\n        const element = el;\n        delete element.dom7AnimateInstance;\n      });\n      a.que = [];\n    },\n\n    done(complete) {\n      a.animating = false;\n      a.elements.each(el => {\n        const element = el;\n        delete element.dom7AnimateInstance;\n      });\n      if (complete) complete(els);\n\n      if (a.que.length > 0) {\n        const que = a.que.shift();\n        a.animate(que[0], que[1]);\n      }\n    },\n\n    animate(props, params) {\n      if (a.animating) {\n        a.que.push([props, params]);\n        return a;\n      }\n\n      const elements = []; // Define & Cache Initials & Units\n\n      a.elements.each((el, index) => {\n        let initialFullValue;\n        let initialValue;\n        let unit;\n        let finalValue;\n        let finalFullValue;\n        if (!el.dom7AnimateInstance) a.elements[index].dom7AnimateInstance = a;\n        elements[index] = {\n          container: el\n        };\n        Object.keys(props).forEach(prop => {\n          initialFullValue = window.getComputedStyle(el, null).getPropertyValue(prop).replace(',', '.');\n          initialValue = parseFloat(initialFullValue);\n          unit = initialFullValue.replace(initialValue, '');\n          finalValue = parseFloat(props[prop]);\n          finalFullValue = props[prop] + unit;\n          elements[index][prop] = {\n            initialFullValue,\n            initialValue,\n            unit,\n            finalValue,\n            finalFullValue,\n            currentValue: initialValue\n          };\n        });\n      });\n      let startTime = null;\n      let time;\n      let elementsDone = 0;\n      let propsDone = 0;\n      let done;\n      let began = false;\n      a.animating = true;\n\n      function render() {\n        time = new Date().getTime();\n        let progress;\n        let easeProgress; // let el;\n\n        if (!began) {\n          began = true;\n          if (params.begin) params.begin(els);\n        }\n\n        if (startTime === null) {\n          startTime = time;\n        }\n\n        if (params.progress) {\n          // eslint-disable-next-line\n          params.progress(els, Math.max(Math.min((time - startTime) / params.duration, 1), 0), startTime + params.duration - time < 0 ? 0 : startTime + params.duration - time, startTime);\n        }\n\n        elements.forEach(element => {\n          const el = element;\n          if (done || el.done) return;\n          Object.keys(props).forEach(prop => {\n            if (done || el.done) return;\n            progress = Math.max(Math.min((time - startTime) / params.duration, 1), 0);\n            easeProgress = a.easingProgress(params.easing, progress);\n            const {\n              initialValue,\n              finalValue,\n              unit\n            } = el[prop];\n            el[prop].currentValue = initialValue + easeProgress * (finalValue - initialValue);\n            const currentValue = el[prop].currentValue;\n\n            if (finalValue > initialValue && currentValue >= finalValue || finalValue < initialValue && currentValue <= finalValue) {\n              el.container.style[prop] = finalValue + unit;\n              propsDone += 1;\n\n              if (propsDone === Object.keys(props).length) {\n                el.done = true;\n                elementsDone += 1;\n              }\n\n              if (elementsDone === elements.length) {\n                done = true;\n              }\n            }\n\n            if (done) {\n              a.done(params.complete);\n              return;\n            }\n\n            el.container.style[prop] = currentValue + unit;\n          });\n        });\n        if (done) return; // Then call\n\n        a.frameId = window.requestAnimationFrame(render);\n      }\n\n      a.frameId = window.requestAnimationFrame(render);\n      return a;\n    }\n\n  };\n\n  if (a.elements.length === 0) {\n    return els;\n  }\n\n  let animateInstance;\n\n  for (let i = 0; i < a.elements.length; i += 1) {\n    if (a.elements[i].dom7AnimateInstance) {\n      animateInstance = a.elements[i].dom7AnimateInstance;\n    } else a.elements[i].dom7AnimateInstance = a;\n  }\n\n  if (!animateInstance) {\n    animateInstance = a;\n  }\n\n  if (initialProps === 'stop') {\n    animateInstance.stop();\n  } else {\n    animateInstance.animate(a.props, a.params);\n  }\n\n  return els;\n}\n\nfunction stop() {\n  const els = this;\n\n  for (let i = 0; i < els.length; i += 1) {\n    if (els[i].dom7AnimateInstance) {\n      els[i].dom7AnimateInstance.stop();\n    }\n  }\n}\n\nconst noTrigger = 'resize scroll'.split(' ');\n\nfunction shortcut(name) {\n  function eventHandler(...args) {\n    if (typeof args[0] === 'undefined') {\n      for (let i = 0; i < this.length; i += 1) {\n        if (noTrigger.indexOf(name) < 0) {\n          if (name in this[i]) this[i][name]();else {\n            $(this[i]).trigger(name);\n          }\n        }\n      }\n\n      return this;\n    }\n\n    return this.on(name, ...args);\n  }\n\n  return eventHandler;\n}\n\nconst click = shortcut('click');\nconst blur = shortcut('blur');\nconst focus = shortcut('focus');\nconst focusin = shortcut('focusin');\nconst focusout = shortcut('focusout');\nconst keyup = shortcut('keyup');\nconst keydown = shortcut('keydown');\nconst keypress = shortcut('keypress');\nconst submit = shortcut('submit');\nconst change = shortcut('change');\nconst mousedown = shortcut('mousedown');\nconst mousemove = shortcut('mousemove');\nconst mouseup = shortcut('mouseup');\nconst mouseenter = shortcut('mouseenter');\nconst mouseleave = shortcut('mouseleave');\nconst mouseout = shortcut('mouseout');\nconst mouseover = shortcut('mouseover');\nconst touchstart = shortcut('touchstart');\nconst touchend = shortcut('touchend');\nconst touchmove = shortcut('touchmove');\nconst resize = shortcut('resize');\nconst scroll = shortcut('scroll');\n\nexport default $;\nexport { $, add, addClass, animate, animationEnd, append, appendTo, attr, blur, change, children, click, closest, css, data, dataset, detach, each, empty, eq, filter, find, focus, focusin, focusout, hasClass, height, hide, html, index, insertAfter, insertBefore, is, keydown, keypress, keyup, mousedown, mouseenter, mouseleave, mousemove, mouseout, mouseover, mouseup, next, nextAll, off, offset, on, once, outerHeight, outerWidth, parent, parents, prepend, prependTo, prev, prevAll, prop, remove, removeAttr, removeClass, removeData, resize, scroll, scrollLeft, scrollTo, scrollTop, show, siblings, stop, styles, submit, text, toggleClass, touchend, touchmove, touchstart, transform, transition, transitionEnd, trigger, val, value, width };\n","/**\n * @description DOM 操作\n * @author wangfupeng\n */\n\nimport $, { append, on, hide, click } from 'dom7'\n\nif (hide) $.fn.hide = hide\nif (append) $.fn.append = append\nif (click) $.fn.click = click\nif (on) $.fn.on = on\n\nexport { Dom7Array } from 'dom7'\nexport default $\n\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nimport DOMNode = globalThis.Node\nimport DOMComment = globalThis.Comment\nimport DOMElement = globalThis.Element\nimport DOMText = globalThis.Text\nimport DOMRange = globalThis.Range\nimport DOMSelection = globalThis.Selection\nimport DOMStaticRange = globalThis.StaticRange\nexport { DOMNode, DOMComment, DOMElement, DOMText, DOMRange, DOMSelection, DOMStaticRange }\n","/**\n * @description helper fns\n * @author wangfupeng\n */\n\nimport Uppy, { UppyFile } from '@uppy/core'\nimport { IDomEditor } from '@wangeditor/editor'\nimport { createUploader } from '@wangeditor/editor'\nimport { AttachmentElement } from '../custom-types'\nimport { IUploadConfigForAttachment } from './config'\n\nfunction getUploadAttachmentMenuConfig(editor: IDomEditor): IUploadConfigForAttachment {\n  // 获取配置，见 `./config.js`\n  return editor.getMenuConfig('uploadAttachment') as IUploadConfigForAttachment\n}\n\n/**\n * 插入 attachment 节点\n * @param fileName fileName\n * @param link link\n */\nexport function insertAttachment(editor: IDomEditor, fileName: string, link: string) {\n  if (!fileName || !link) return\n\n  // 还原选区\n  editor.restoreSelection()\n\n  // 插入节点\n  const attachmentElem: AttachmentElement = {\n    type: 'attachment',\n    fileName,\n    link,\n    children: [{ text: '' }],\n  }\n  editor.insertNode(attachmentElem)\n  editor.move(1)\n\n  // 回调\n  const { onInsertedAttachment } = getUploadAttachmentMenuConfig(editor)\n  if (onInsertedAttachment) onInsertedAttachment(attachmentElem)\n}\n\n/**\n * 上传附件文件\n * @param editor editor\n * @param files files\n */\nexport async function uploadAttachments(editor: IDomEditor, files: FileList | null) {\n  if (files == null) return\n  const fileList = Array.prototype.slice.call(files)\n\n  // 获取菜单配置\n  const { customUpload } = getUploadAttachmentMenuConfig(editor)\n\n  // 按顺序上传\n  for await (const file of fileList) {\n    // 上传\n    if (customUpload) {\n      // 自定义上传\n      await customUpload(file, (fileName: string, link: string) =>\n        insertAttachment(editor, fileName, link)\n      )\n    } else {\n      // 默认上传\n      await uploadFile(editor, file)\n    }\n  }\n}\n\n/**\n * 上传文件\n * @param editor editor\n * @param file file\n */\nasync function uploadFile(editor: IDomEditor, file: File) {\n  const uppy = getUppy(editor)\n\n  const { name, type, size } = file\n  uppy.addFile({\n    name,\n    type,\n    size,\n    data: file,\n  })\n  await uppy.upload()\n}\n\n// 存储 editor uppy 的关系 - 缓存 uppy ，不重复创建\nconst EDITOR_TO_UPPY_MAP = new WeakMap<IDomEditor, Uppy>()\n\n/**\n * 获取 uppy 实例（并通过 editor 缓存）\n * @param editor editor\n */\nfunction getUppy(editor: IDomEditor): Uppy {\n  // 从缓存中获取\n  let uppy = EDITOR_TO_UPPY_MAP.get(editor)\n  if (uppy != null) return uppy\n\n  const menuConfig = getUploadAttachmentMenuConfig(editor)\n  const { onSuccess, onProgress, onFailed, customInsert, onError } = menuConfig\n\n  // 上传完成之后\n  const successHandler = (file: UppyFile, res: any) => {\n    // 预期 res 格式：\n    // 成功：{ errno: 0, data: { url } }\n    // 失败：{ errno: !0, message: '失败信息' }\n\n    if (customInsert) {\n      // 用户自定义插入文件，此时 res 格式可能不符合预期\n      customInsert(res, file, (fileName: string, link: string) =>\n        insertAttachment(editor, fileName, link)\n      )\n      return\n    }\n\n    const { errno = 1, data = {} } = res\n    if (errno !== 0) {\n      console.error(`'${file.name}' upload failed`, res)\n\n      // failed 回调\n      onFailed(file, res)\n      return\n    }\n\n    const { url = '' } = data\n    insertAttachment(editor, file.name, url)\n\n    // success 回调\n    onSuccess(file, res)\n  }\n\n  // progress 显示进度条\n  const progressHandler = (progress: number) => {\n    editor.showProgressBar(progress)\n\n    // 回调函数\n    onProgress && onProgress(progress)\n  }\n\n  // onError 提示错误\n  const errorHandler = (file: any, err: any, res: any) => {\n    const fileName = file.name\n    console.error(`'${fileName} upload error`, err, res)\n\n    // 回调函数\n    onError && onError(file, err, res)\n  }\n\n  // 创建 uppy\n  uppy = createUploader({\n    ...menuConfig,\n    onProgress: progressHandler,\n    onSuccess: successHandler,\n    onError: errorHandler,\n  })\n  // 缓存 uppy\n  EDITOR_TO_UPPY_MAP.set(editor, uppy)\n\n  return uppy\n}\n","/**\n * @description upload attachment menu\n * @author wangfupeng\n */\n\nimport { DomEditor, IDomEditor, SlateRange, t } from '@wangeditor/editor'\nimport { IButtonMenu } from '@wangeditor/editor'\nimport { ATTACHMENT_SVG } from '../../constants/icon-svg'\nimport { IUploadConfigForAttachment } from './config'\nimport $ from '../../utils/dom'\nimport { insertAttachment, uploadAttachments } from './helper'\n\nclass UploadAttachmentMenu implements IButtonMenu {\n  readonly title = t('attachment.upload')\n  readonly iconSvg = ATTACHMENT_SVG\n  readonly tag = 'button'\n\n  getValue(editor: IDomEditor): string | boolean {\n    // 无需获取 val\n    return ''\n  }\n\n  isActive(editor: IDomEditor): boolean {\n    // 任何时候，都不用激活 menu\n    return false\n  }\n\n  exec(editor: IDomEditor, value: string | boolean) {\n    const { allowedFileTypes = [], customBrowseAndUpload } = this.getMenuConfig(editor)\n\n    // 自定义选择文件、并上传，如图床\n    if (customBrowseAndUpload) {\n      customBrowseAndUpload((fileName: string, link: string) =>\n        insertAttachment(editor, fileName, link)\n      )\n      return\n    }\n\n    // 设置选择文件的类型\n    let acceptAttr = ''\n    if (allowedFileTypes.length > 0) {\n      acceptAttr = `accept=\"${allowedFileTypes.join(', ')}\"`\n    }\n\n    // 添加 file input（每次重新创建 input）\n    const $body = $('body')\n    const $inputFile = $(`<input type=\"file\" ${acceptAttr} multiple/>`)\n    $inputFile.hide()\n    $body.append($inputFile)\n    $inputFile.click()\n    // 选中文件\n    $inputFile.on('change', () => {\n      const files = ($inputFile[0] as HTMLInputElement).files\n      uploadAttachments(editor, files) // 上传文件\n    })\n  }\n\n  isDisabled(editor: IDomEditor): boolean {\n    const { selection } = editor\n    if (selection == null) return true\n    if (SlateRange.isExpanded(selection)) return true // 选区非折叠，禁用\n\n    const selectedElems = DomEditor.getSelectedElems(editor)\n\n    const hasVoidElem = selectedElems.some(elem => editor.isVoid(elem))\n    if (hasVoidElem) return true // 选中了 void 元素，禁用\n\n    const hasPreElem = selectedElems.some(elem => DomEditor.getNodeType(elem) === 'pre')\n    if (hasPreElem) return true // 选中了 pre 原则，禁用\n\n    return false\n  }\n\n  private getMenuConfig(editor: IDomEditor): IUploadConfigForAttachment {\n    // 获取配置，见 `./config.js`\n    return editor.getMenuConfig('uploadAttachment') as IUploadConfigForAttachment\n  }\n}\n\nexport default UploadAttachmentMenu\n","/**\n * @description icon svg\n * @author wangfupeng\n */\n\n/**\n * 【注意】svg 字符串的长度 ，否则会导致代码体积过大\n * 尽量选择 https://www.iconfont.cn/collections/detail?spm=a313x.7781069.0.da5a778a4&cid=20293\n * 找不到再从 iconfont.com 搜索\n */\n\n// 附件\nexport const ATTACHMENT_SVG = `<svg viewBox=\"0 0 1024 1024\"><path d=\"M665.821116 327.053068l-64.958782-64.926783-324.79391 324.729911c-53.822991 53.790991-53.822991 141.053355 0 194.844347s141.053355 53.790991 194.876346 0l389.752692-389.688693a229.531696 229.531696 0 0 0 0-324.729912 229.627694 229.627694 0 0 0-324.761911 0L126.727224 476.458266l-0.863984 0.831985c-125.085655 125.085655-125.085655 327.833853 0 452.887508 125.053655 125.053655 327.865853 125.053655 452.983507 0l0.831984-0.863984 0.031999 0.032 279.322763-279.290764-64.990781-64.926782-279.322763 279.258764-0.831984 0.831984a228.731711 228.731711 0 0 1-323.065943 0 228.603714 228.603714 0 0 1 0-322.969944l0.895983-0.831985-0.031999-0.063998L600.958332 132.208721c53.694993-53.726993 141.149353-53.726993 194.876346 0s53.694993 141.149353 0 194.844347L406.081986 716.741761c-17.919664 17.919664-47.039118 17.919664-64.958782 0a45.983138 45.983138 0 0 1 0-64.926783L665.917114 327.053068z\"></path></svg>`\n\n// 下载\nexport const DOWNLOAD_SVG = `<svg viewBox=\"0 0 1024 1024\"><path d=\"M736 448l-256 256-256-256h160V64h192v384z m-256 256H0v256h960v-256H480z m416 128h-128v-64h128v64z\"></path></svg>`\n","/**\n * @description download attachment menu\n * @author wangfupeng\n */\n\nimport { DomEditor, IDomEditor, SlateRange, t } from '@wangeditor/editor'\nimport { IButtonMenu } from '@wangeditor/editor'\nimport { DOWNLOAD_SVG } from '../../constants/icon-svg'\nimport { AttachmentElement } from '../custom-types'\n\nclass DownloadAttachmentMenu implements IButtonMenu {\n  readonly title = t('attachment.download')\n  readonly iconSvg = DOWNLOAD_SVG\n  readonly tag = 'button'\n  readonly alwaysEnable = true\n\n  getValue(editor: IDomEditor): string | boolean {\n    const attachmentElem = this.getSelectedElem(editor)\n    if (attachmentElem == null) return ''\n    return attachmentElem.link\n  }\n\n  isActive(editor: IDomEditor): boolean {\n    // 任何时候，都不用激活 menu\n    return false\n  }\n\n  exec(editor: IDomEditor, value: string | boolean) {\n    if (!value) return\n    if (typeof value !== 'string') return\n    window.open(value, '_blank')\n  }\n\n  isDisabled(editor: IDomEditor): boolean {\n    const { selection } = editor\n    if (selection == null) return true\n    if (SlateRange.isExpanded(selection)) return true // 选区非折叠，禁用\n\n    // 未匹配到 attachment node 则禁用\n    const attachmentElem = this.getSelectedElem(editor)\n    if (attachmentElem == null) return true\n\n    return false\n  }\n\n  private getSelectedElem(editor: IDomEditor): AttachmentElement | null {\n    const node = DomEditor.getSelectedNodeByType(editor, 'attachment')\n    if (node == null) return null\n    return node as AttachmentElement\n  }\n}\n\nexport default DownloadAttachmentMenu\n","/**\n * @description src entry\n * @author wangfupeng\n */\n\nimport module from './module/index'\n\nexport * from './module/custom-types'\n\nexport default module\n","/**\n * @description attachment module entry\n * @author wangfupeng\n */\n\nimport './local' // 多语言\n\nimport { IModuleConf } from '@wangeditor/editor'\nimport withAttachment from './plugin'\nimport renderElemConf from './render-elem'\nimport elemToHtmlConf from './elem-to-html'\nimport parseHtmlConf from './parse-elem-html'\nimport { uploadAttachmentMenuConf, downloadAttachmentMenuConf } from './menu/index'\n\nconst module: Partial<IModuleConf> = {\n  editorPlugin: withAttachment,\n  renderElems: [renderElemConf],\n  elemsToHtml: [elemToHtmlConf],\n  parseElemsHtml: [parseHtmlConf],\n  menus: [uploadAttachmentMenuConf, downloadAttachmentMenuConf],\n}\n\nexport default module\n","/**\n * @description attachment plugin\n * @author wangfupeng\n */\n\nimport { DomEditor, IDomEditor } from '@wangeditor/editor'\n\nfunction withAttachment<T extends IDomEditor>(editor: T) {\n  const { isInline, isVoid } = editor\n  const newEditor = editor\n\n  // 重写 isInline\n  newEditor.isInline = elem => {\n    const type = DomEditor.getNodeType(elem)\n    if (type === 'attachment') {\n      return true\n    }\n\n    return isInline(elem)\n  }\n\n  // 重写 isVoid\n  newEditor.isVoid = elem => {\n    const type = DomEditor.getNodeType(elem)\n    if (type === 'attachment') {\n      return true\n    }\n\n    return isVoid(elem)\n  }\n\n  return newEditor\n}\n\nexport default withAttachment\n","/**\n * @description elem to html\n * @author wangfupeng\n */\n\nimport { SlateElement } from '@wangeditor/editor'\nimport { AttachmentElement } from './custom-types'\n\n// 生成 html 的函数\nfunction attachmentToHtml(elem: SlateElement, childrenHtml: string): string {\n  const { link = '', fileName = '' } = elem as AttachmentElement\n  return `<a data-w-e-type=\"attachment\" data-w-e-is-void data-w-e-is-inline href=\"${link}\" download=\"${fileName}\">${fileName}</a>`\n}\n\n// 配置\nconst conf = {\n  type: 'attachment', // 节点 type ，重要！！！\n  elemToHtml: attachmentToHtml,\n}\n\nexport default conf\n","/**\n * @description parse elem html\n * @author wangfupeng\n */\n\nimport { DOMElement } from '../utils/dom'\nimport { IDomEditor, SlateDescendant, SlateElement } from '@wangeditor/editor'\nimport { AttachmentElement } from './custom-types'\n\nfunction parseHtml(\n  elem: DOMElement,\n  children: SlateDescendant[],\n  editor: IDomEditor\n): SlateElement {\n  const link = elem.getAttribute('href') || ''\n  const fileName = elem.getAttribute('download') || ''\n  return {\n    type: 'attachment',\n    link,\n    fileName,\n    children: [{ text: '' }], // void node 必须有一个空白 text\n  } as AttachmentElement\n}\n\nconst parseHtmlConf = {\n  selector: 'a[data-w-e-type=\"attachment\"]',\n  parseElemHtml: parseHtml,\n}\n\nexport default parseHtmlConf\n","/**\n * @description menu entry\n * @author wangfupeng\n */\n\nimport UploadAttachment from './UploadAttachment'\nimport DownloadAttachment from './DownloadAttachment'\nimport { genUploadAttachmentMenuConfig } from './config'\n\nexport const uploadAttachmentMenuConf = {\n  key: 'uploadAttachment', // menu key ，唯一。注册之后，可配置到工具栏\n  factory() {\n    return new UploadAttachment()\n  },\n\n  // 默认的菜单菜单配置，将存储在 editorConfig.MENU_CONF[key] 中\n  // 创建编辑器时，可通过 editorConfig.MENU_CONF[key] = {...} 来修改\n  config: genUploadAttachmentMenuConfig(),\n}\n\nexport const downloadAttachmentMenuConf = {\n  key: 'downloadAttachment', // menu key ，唯一。注册之后，可配置到工具栏\n  factory() {\n    return new DownloadAttachment()\n  },\n}\n","/**\n * @description menu config\n * @author wangfupeng\n */\n\nimport { IUploadConfig } from '@wangeditor/editor'\nimport { AttachmentElement } from '../custom-types'\nimport { UppyFile } from '@uppy/core'\n\ntype InsertFn = (fileName: string, link: string) => void\n\n// 在通用 uploadConfig 上，扩展 attachment 相关配置\nexport type IUploadConfigForAttachment = IUploadConfig & {\n  allowedFileTypes?: string[]\n  // 用户自定义插入附件\n  customInsert?: (res: any, file: UppyFile, insertFn: InsertFn) => void\n  // 用户自定义上传附件\n  customUpload?: (files: File, insertFn: InsertFn) => void\n  // 自定义选择附件，如图床\n  customBrowseAndUpload?: (insertFn: InsertFn) => void\n  // 插入之后的回调\n  onInsertedAttachment?: (elem: AttachmentElement) => void\n}\n\nexport function genUploadAttachmentMenuConfig(): IUploadConfigForAttachment {\n  return {\n    server: '', // server API 地址，需用户配置\n\n    fieldName: 'wangeditor-uploaded-attachment', // formData 中，文件的 key\n    maxFileSize: 10 * 1024 * 1024, // 10M\n    maxNumberOfFiles: 5, // 最多上传 xx 个附件\n    allowedFileTypes: ['*'],\n    meta: {\n      // 自定义上传参数，例如传递验证的 token 等。参数会被添加到 formData 中，一起上传到服务端。\n      // 例如：token: 'xxxxx', x: 100\n    },\n    metaWithUrl: false,\n    // headers: {\n    //   // 自定义 http headers\n    //   // 例如：Accept: 'text/x-json', a: 100,\n    // },\n    withCredentials: false,\n    timeout: 30 * 1000, // 30s\n\n    onBeforeUpload: (file: any) => file, // 返回 false 则终止上传\n    onProgress: (progress: number) => {\n      /* on progress */\n    },\n    onSuccess: (file: any, res: any) => {\n      /* on success */\n    },\n    onFailed: (file: any, res: any) => {\n      /* on failed */\n    },\n    onError: (file: any, err: any, res: any) => {\n      /* on error */\n      /* on timeout */\n    },\n\n    // 自定义插入附件，用户配置\n    // customInsert: (res, file, insertFn) => {},\n\n    // 自定义上传附件，用户配置\n    // customUpload: (file, insertFn) => {},\n\n    // 自定义选择，并上传附件，如：图床 （用户配置）\n    // customBrowseAndUpload: insertFn => {},\n\n    onInsertedAttachment(elem: AttachmentElement) {\n      // 插入文件之后的 callback\n    },\n  }\n}\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__857__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","i18nAddResources","attachment","upload","download","sel","data","children","text","elm","array","Array","isArray","primitive","s","String","Number","addNS","ns","i","length","child","childData","h","b","c","toString","type","renderElem","elem","editor","isDisabled","selected","DomEditor","fileName","link","props","contentEditable","style","display","marginLeft","marginRight","border","borderRadius","padding","backgroundColor","cursor","on","click","window","open","src","width","minWidth","minHeight","isObject","constructor","extend","target","keys","forEach","ssrDocument","body","addEventListener","removeEventListener","activeElement","blur","nodeName","querySelector","querySelectorAll","getElementById","createEvent","initEvent","createElement","childNodes","setAttribute","getElementsByTagName","createElementNS","importNode","location","hash","host","hostname","href","origin","pathname","protocol","search","doc","document","ssrWindow","navigator","userAgent","history","replaceState","pushState","go","back","CustomEvent","this","getComputedStyle","getPropertyValue","Image","Date","screen","setTimeout","clearTimeout","matchMedia","requestAnimationFrame","callback","cancelAnimationFrame","id","win","Dom7","items","super","proto","__proto__","set","makeReactive","$","selector","context","arr","html","trim","indexOf","toCreate","tempParent","innerHTML","push","a","res","qsa","nodeType","uniqueArray","arrayUnique","args","eventType","targetSelector","listener","capture","handleLiveEvent","e","eventData","dom7EventData","unshift","is","apply","parents","k","handleEvent","events","split","j","el","event","dom7LiveListeners","proxyListener","dom7Listeners","hide","append","els","newChild","tempDiv","firstChild","appendChild","fn","noTrigger","shortcut","name","trigger","globalThis","Node","Comment","Element","Text","Range","Selection","StaticRange","getUploadAttachmentMenuConfig","getMenuConfig","insertAttachment","restoreSelection","attachmentElem","insertNode","move","onInsertedAttachment","uploadFile","file","uppy","EDITOR_TO_UPPY_MAP","menuConfig","onSuccess","onProgress","onFailed","customInsert","onError","createUploader","progress","showProgressBar","errno","console","error","url","err","getUppy","size","addFile","WeakMap","title","t","iconSvg","tag","getValue","isActive","exec","allowedFileTypes","customBrowseAndUpload","acceptAttr","join","$body","$inputFile","files","fileList","slice","customUpload","uploadAttachments","selection","SlateRange","selectedElems","some","isVoid","alwaysEnable","getSelectedElem","node","editorPlugin","isInline","newEditor","renderElems","elemsToHtml","elemToHtml","childrenHtml","parseElemsHtml","parseElemHtml","getAttribute","menus","UploadAttachment","config","server","fieldName","maxFileSize","maxNumberOfFiles","meta","metaWithUrl","withCredentials","timeout","onBeforeUpload","DownloadAttachment"],"sourceRoot":""}